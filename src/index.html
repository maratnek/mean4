<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Stock</title>
  <!-- <link rel="icon" href="/favicon.ico" type="image/x-icon"> -->
  <link rel="icon" type="image/svg+xml" sizes="any" href="./assets/img/stock-icon.svg">
  <base href="./">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- <link rel="stylesheet" href="./node_modules/materialize-css/dist/css/materialize.min.css"> -->

  <!-- Compiled and minified CSS -->
   <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/css/materialize.min.css"> -->

</head>
<body>

  <!-- <div id="loading">
    <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>
  </div> -->
  <!-- <div id="serverLog"></div> -->
  <app-root></app-root>
  <!-- <webview id="expressApp" class="expressApp"></webview> -->
  <script type="text/javascript">

    // const $ = require('jquery');
    // const  _ = require("lodash");
    // const  key = require("keymaster");
    // const  $serverLog = $("#serverLog");
    // const  $expressApp = $("#expressApp");
    // const  $loading = $("#loading");
    //
    // key("f1", () => {
    //   if ($serverLog.css("display") === "none") {
    //     $serverLog.css("display", "block");
    //     $expressApp.addClass("expressAppHide");
    //   } else {
    //     $expressApp.removeClass("expressAppHide");
    //     $serverLog.css("display", "none");
    //   }
    // });

    // function strip(s) {
    //   // regex from: http://stackoverflow.com/a/29497680/170217
    //   return s.replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g, '');
    // }
    //
    // function redirectOutput(x) {
    //   let lineBuffer = "";
    //
    //   x.on('data', function (data) {
    //     lineBuffer += data.toString();
    //     let lines = lineBuffer.split("\n");
    //
    //     _.forEach(lines, (l) => {
    //       if (l !== "") {
    //         $serverLog.append(strip(l) + "<br/>");
    //       }
    //     });
    //
    //     lineBuffer = lines[lines.length - 1];
    //   });
    // }
    //
    // redirectOutput(node.stdout);
    // redirectOutput(node.stderr);

    // let checkServerRunning = setInterval(() => {
    //   request(expressAppUrl, (error, response, body) => {
    //     if (!error && response.statusCode == 200) {
    //       $expressApp.attr("src", expressAppUrl);
    //       $loading.css("display", "none");
    //       $expressApp.css("display", "block");
    //       clearInterval(checkServerRunning);
    //     }
    //   });
    // }, 1000);

  </script>

</body>
</html>
